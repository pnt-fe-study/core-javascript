# 1장 데이터 타입

## 01 데이터 타입의 종류

- 타입의 종류는 크게 기본형과 참조형으로 구분된다.
- 기본형은 숫자, 문자열, 불린, null, undefined, symbol 등이 있다.
- 참조형은 객체, 배열, 함수, 날짜, 정규표현식 등이 있다.

**어떤 기준으로 기본형과 참조형이 나뉘는 걸까?**

- 둘 다 복제를 한다.
- 기본형은 값이 담긴 주솟값을 복제한다.
- 참조형은 값이 담긴 주솟값들로 이루어진 묶음을 기리키는 주솟값을 복제한다.
- 기본형은 불변성이다.

## 02 데이터 타입에 관한 배경지식

### 1-2-1 메모리와 데이터

- 0과 1로 표현할 수 있는 하나의 메모리 조각을 비트라고 한다.
- 1바이트는 8비트입니다.
- 1바이트는 256개의 값을 표현할 수 있다.
- 자바스크립트 숫자는 8바이트이다.
- C/C++, 자바 등의 정적 타입 언어는 메모리 낭비를 최소화하기 위해 데이터 타입별로 할당할 메모리 영역을 정해놓았다.
    - 메모리가 부족했던 시절의 해결 방안

### 1-2-2 식별자와 변수

- 변수는 변할 수 있는 데이터를 말한다.
- 식별자는 어떤 데이터를 식별하는 데 사용하는 이름 즉 변수명이다.

## 03 변수 선언과 데이터 할당

### 1-3-1 변수 선언

- 변수란 변경 가능한 데이터가 담길 수 있는 공간이라고 생각할 수 있다.

```tsx
var a;
```

<img width="776" alt="스크린샷 2025-04-09 오후 11 36 24" src="https://github.com/user-attachments/assets/373f04ed-e068-4da5-954d-f51174b30928" />


- var a의 명령을 받은 컴퓨터는 메모리에서 비어있는 공간 하나를 확보한다.
- 1003번 주소로 정했다.
- 이 공간의 이름(식별자)을 a라고 지정한다.
- 컴퓨터는 메모리에서 a라는 이름을 가진 주소를 검색해 해당 공간에 담긴 데이터를 반환하여 사용한다.

### 1-3-2 데이터 할당

```tsx
var a; // 변수 a 선언
a = 'abc'; // 변수 a에 데이터 할당

var a = 'abc'; // 변수 선언과 할당을 한 문장으로 표현
```

- 데이터를 저장하기 위한 별도의 메모리 공간을 확보해 ‘abc’를 저장하고, 그 주소를 변수 영역에 저장하는 식으로 이뤄진다.
- 변수 영역과 데이터 영역이 나뉜다.
    
    <img width="739" alt="스크린샷 2025-04-09 오후 11 37 19" src="https://github.com/user-attachments/assets/e6c07a4c-c8f0-4994-99c4-1ad496b4e007" />
    
    - 변수 영역에서 빈 공간(1003)을 확보한다.
    - 확보한 공간의 식별자를 a로 지정한다.
    - 데이터 영역의 빈 공간(5004)에 문자열 ‘abc’를 저장한다.
    - 변수 영역에서 a라는 식별자(1003)를 검색한다.
    - 앞서 저장한 문자열의 주소(5003)를 1003번에 대입한다.

**왜 변수영역과 데이터 영역으로 나뉠까?**

- 만약 문자열과 같이 가변적인 데이터가 들어올 경우 미리 확보한 공간(숫자 8바이트)이라면 미리 확보한 공간 보다 큰 데이터일 경우 다시 데이터 크기에 맞게 늘리는 작업이 필요하다.
- 만약 중간에 있는 데이터를 늘려야 하는 상황이라면 데이터 주소를 맨 뒤 또는 공간을 찾아 이동시킨 후 공간을 늘려야 한다.
- 효율적으로 문자열 데이터의 변환을 처리하기 위해 변수와 데이터를 별도의 공간에 나누어 저장한다.
    
    <img width="723" alt="스크린샷 2025-04-09 오후 11 40 33" src="https://github.com/user-attachments/assets/25ec4b83-5711-4b3b-a14f-265673321c87" />
    
    - 예를 들어 문자열 ‘abc’가 5004번 주소에 저장되어 있고 1003번 주소에서  a=’abc’로 사용하고 있을 때 a=’abcdef’로 바꾼다면 5005번 주소에 ‘abcdef’를 새로 만들고 1003번 주소에 5005번을 연결한다.
    - 이는 동일한 데이터를 다른 변수에 넣을 때 하나의 데이터 영역에서 여러 변수 영역에서 사용할 수 있다.
- 변수 영역은 스택 데이터 영역은 힙에 저장한다.
    

    <img width="733" alt="스크린샷 2025-04-09 오후 11 41 29" src="https://github.com/user-attachments/assets/64c1d12d-9ef6-4778-934d-c6a86d60295b" />
    

## 04 기본형 데이터와 참조형 데이터

### 1-4-1 불변값

- 변수는 바꿀 수 있다.
- 상수는 바꿀 수 없다.
- 변수와 상수를 구분 짓는 변경 가능성의 대상은 변수 영역 메모리이다.
    - 한 번 데이터 할당이 이뤄진 변수 공간에 다른 데이터를 재할당할 수 있는지 여부가 관건이다.
- 반면 불변성 여부를 구분할 때의 변경 가능성의 대상은 데이터 영역 메모리이다.
    

    <img width="746" alt="스크린샷 2025-04-09 오후 11 42 31" src="https://github.com/user-attachments/assets/abc817da-7d11-45a4-ab71-c2710ff8128c" />
    
- 기본형 데이터(숫자, 문자열, boolean, null, nudefined, Symbol)은 모두 불변값이다.

### 1-4-2 가변값
<img width="713" alt="스크린샷 2025-04-09 오후 11 42 59" src="https://github.com/user-attachments/assets/9166b061-ac98-406b-b80f-3b4728181cd0" />

- 기본형 데이터와의 차이는 객체의 변수 영역이 별도로 존재한다.
- 객체가 별도로 할애한 영역은 변수 영역일 뿐 데이터 영역은 기존의 메모리 공간을 그대로 활용하고 있다.
    - 이 부분 때문에 흔히 “참조형 데이터는 불변하지 않다”라고 한다.
- 사용하지 않는 참조 변수(참조 카운트 = 0)는 가비지 컬렉터의 수거 대상이 된다.
- 책의 예시를 쭉 읽고 따라가는 게 좋을 것 같다.

### 1-4-5 변수 복사 비교
<img width="752" alt="스크린샷 2025-04-09 오후 11 43 33" src="https://github.com/user-attachments/assets/05734714-8f0d-4e54-b5e7-4e64866b82c7" />

<img width="762" alt="스크린샷 2025-04-09 오후 11 43 51" src="https://github.com/user-attachments/assets/4bb6ce69-ac55-481e-9c3b-99408c87a78a" />


- 변수를 복사하는 과정은 기본형 데이터와 참조형 데이터 모두 같은 주소를 바라보게 되는 점에서 동일하다.

**변수 복사 이후 값 변경 결과 비교**

<img width="745" alt="스크린샷 2025-04-09 오후 11 44 45" src="https://github.com/user-attachments/assets/e47021c6-50d1-4e88-ad2b-c564f5bcb0ef" />

<img width="759" alt="스크린샷 2025-04-09 오후 11 45 04" src="https://github.com/user-attachments/assets/6bbd66e8-50ab-48e0-9d4a-258506aa3566" />

- 기본형 데이터는 다른 주소를 바라보게 되었으나 참조형 데이터는 같은 객체를 바라보고 있다.
- 사실 어떤 데이터 타입이든 변수에 할당하기 위해서는 주솟값을 복사해야 하기 때문에 엄밀히 얘기하면 자바스크립트의 모든 데이터 타입은 참조형 데이터일 수밖에 없다.
- 참조형 데이터가 가변값이라고 설명할 때의 가변은 참조형 데이터 자체를 변경할 경우가 아니라 그 내부의 프로퍼티를 변경할 때만 성립한다.

## 05 불변 객체

### 1-5-1 불변 객체를 만드는 간단한 방법

- 매번 새로운 객체를 만들어 재할당하기로 규칙을 정한다.
- 자동으로 새로운 객체를 만드는 도구를 활용한다.

### 1-5-2 얕은 복사와 깊은 복사

- 얕은 복사는 바로 아래 단계의 값만 복사한다.
- 깊은 복사는 내부의 모든 값들을 하나하나 전부 복사한다.

## 06 undefined와 null

- undefined는 사용자가 명시적으로 지정할 수도 있지만, 값이 존재하지 않을 때 자바스크립트 엔진이 자동으로 부여하는 경우도 있다.
- 자바스크립트가 undefined를 반환하는 경우
    - 값을 대입하지 않은 변수, 즉 데이터 영역의 메모리 주소를 지정하지 않은 식별자에 접근할 때
    - 객체 내부의 존재하지 않은 프로퍼티를 접근하려 할 때
    - return 문이 없거나 호출되지 않는 함수의 실행 결과
- ‘비어있는 요소’와 ‘undefined를 할당한 요소’는 출력 결과가 다르다.
   
     <img width="706" alt="스크린샷 2025-04-09 오후 11 45 25" src="https://github.com/user-attachments/assets/f4561460-8a12-4851-a8d1-f39219d0ec73" />
    
- undefined를 할당해서 사용하지 않고 null을 사용하면 undefined의 구분을 피할 수 있다.

## 07 정리

- 자바스크립트 데이터 타입에는 기본형과 참조형이 있다.
- 기본형은 불변값이고 참조형은 가변값이다.
- 변수는 변경 가능한 데이터가 담길 수 있는 공간이고, 식별자는 그 변수의 이름을 말한다.
- 변수를 선언하면 컴퓨터는 메모리의 빈 공간에 식별자를 저장하고, 그 공간에 자동으로 undefined를 할당한다.
- 변수에 데이터를 할당하려고 하면 별도의 공간에 데이터를 저장하고, 그 공간의 주소를 변수의 값 영역에 할당한다.
- 참조형 데이터를 할당하고자 할 경우 컴퓨터는 참조형 데이터 내부 프로퍼티들을 위한 변수 영역을 별도로 확보해서 확보한 주소를 변수에 연결하고, 다시 앞서 확보한 변수 영역에 각 프로퍼티의 식별자를 저장하고, 각 데이터를 별도의 공간에 저장해서 그 주소를 식별자들과 매칭시킨다.
    - 이처럼 할당 과정에서 기본형과 차이가 생긴 이유는 참조형 데이터가 여러 개의 프로퍼티를 모은 그룹이기 때문이다.
    - 이 차이로 인해 참조형 데이터를 가변값으로 여겨야만 하는 상황이 발생한다.
- 깊은 복사를 통해 참조형을 불변값으로 사용한다.
- ‘없음’을 나타내는 변수는 undefined와 null이 있다.
- undefined는 어떤 변수에 값이 존재하지 않을 경우를 의미하고 null은 사용자가 명시적으로 없음을 표현하기 위해 대입한 값이다.
- 본래의 의미에 따라 사용자가 없음을 표현하기 위해 명시적으로 undefined를 대입하는 것은 지양하는 것이 좋다.(필자의 견해)
